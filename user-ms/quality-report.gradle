jacocoTestReport {
    dependsOn test
    afterEvaluate {
        classDirectories.setFrom(files(classDirectories.files.collect {
            fileTree(dir: it, exclude: [
                    'com/nelumbo/user/UserApplication.class',
                    'com/nelumbo/user/config/**',
                    'com/nelumbo/user/dto/**',
                    'com/nelumbo/user/entity/**'
            ])
        }))
    }
}

jacocoTestCoverageVerification {
    dependsOn test
    afterEvaluate {
        classDirectories.setFrom(files(classDirectories.files.collect {
            fileTree(dir: it, exclude: [
                    'com/nelumbo/user/UserApplication.class',
                    'com/nelumbo/user/config/**',
                    'com/nelumbo/user/dto/**',
                    'com/nelumbo/user/entity/**'
            ])
        }))
    }
    violationRules {
        rule {
            limit {
                minimum = 0.0
            }
        }
    }
}

sonar {
    properties {
        property "sonar.projectKey", "User"
        property "sonar.host.url", "http://localhost:9000" // URL del servidor SonarQube
        property "sonar.login", "sqp_2b3746ad6d89078627ed9ebab4d664cf995c978a" // Token de autenticaci√≥n
        property "sonar.scm.disabled", "true" // Desactivar el sensor SCM
    }
}